@use '@angular/material' as mat;

// ─── Google Fonts ────────────────────────────────────────────────────────────
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=DM+Serif+Display&display=swap');
@import url('https://fonts.googleapis.com/icon?family=Material+Icons');

// ─── Material Theme Definition ────────────────────────────────────────────────
$my-theme: mat.define-theme((
  color: (
    theme-type: light,
    primary: mat.$azure-palette,
    tertiary: mat.$orange-palette,
  ),
  typography: (
    brand-family: 'DM Sans',
    plain-family: 'DM Sans',
  ),
  density: (
    scale: -1,
  ),
));

$my-dark-theme: mat.define-theme((
  color: (
    theme-type: dark,
    primary: mat.$azure-palette,
    tertiary: mat.$orange-palette,
  ),
  typography: (
    brand-family: 'DM Sans',
    plain-family: 'DM Sans',
  ),
  density: (
    scale: -1,
  ),
));

html {
  @include mat.all-component-themes($my-theme);
  @include mat.all-component-typographies($my-theme);
}

@media (prefers-color-scheme: dark) {
  html:not([data-theme="light"]) {
    @include mat.all-component-colors($my-dark-theme);
  }
}

html[data-theme="dark"] {
  @include mat.all-component-colors($my-dark-theme);
}

:root {
  --bg-app:      #dde1ef;
  --bg-section:  #eceef8;
  --bg-card:     #ffffff;
  --border:      #c8cde4;

  --text-primary:   #1e2340;
  --text-secondary: #3d4466;
  --text-muted:     #6b7194;
  --text-disabled:  #9ea4bf;

  --color-primary:    #3d52b0;
  --color-primary-lt: #e8ebf8;

  --color-success:    #16803c;
  --color-success-lt: #dcfce7;
  --color-warning:    #b45309;
  --color-warning-lt: #fef9c3;
  --color-danger:     #b91c1c;
  --color-danger-lt:  #fee2e2;
  --color-external:   #64748b;
  --color-external-lt:#eef0f8;

  // Spacing & shape
  --radius-sm:  6px;
  --radius-md:  12px;
  --radius-lg:  20px;

  // Motion
  --ease: cubic-bezier(0.4, 0, 0.2, 1);
  --duration: 200ms;
  --transition: var(--duration) var(--ease);

  // Elevation
  --shadow-sm:   0 1px 3px rgba(30, 35, 64, 0.07), 0 1px 2px rgba(30, 35, 64, 0.04);
  --shadow-md:   0 4px 12px rgba(30, 35, 64, 0.09), 0 2px 4px rgba(30, 35, 64, 0.05);
  --shadow-lg:   0 10px 28px rgba(30, 35, 64, 0.12), 0 4px 8px rgba(30, 35, 64, 0.06);
}

// Dark-mode CSS variables — applied via OS preference OR explicit [data-theme="dark"]
@mixin dark-vars {
  --bg-app:      #131621;
  --bg-section:  #1c1f2e;
  --bg-card:     #23273a;
  --border:      #2c3158;

  --text-primary:   #e8eaf6;
  --text-secondary: #b0b8e0;
  --text-muted:     #7880a8;
  --text-disabled:  #454c70;

  --color-primary:    #7986cb;
  --color-primary-lt: rgba(121, 134, 203, 0.15);

  --color-success:    #4ade80;
  --color-success-lt: rgba(74, 222, 128, 0.12);
  --color-warning:    #fcd34d;
  --color-warning-lt: rgba(252, 211, 77, 0.12);
  --color-danger:     #f87171;
  --color-danger-lt:  rgba(248, 113, 113, 0.12);
  --color-external:   #b0b8e0;
  --color-external-lt:rgb(19 22 33);

  --shadow-sm:   0 1px 3px rgba(0, 0, 0, 0.3);
  --shadow-md:   0 4px 12px rgba(0, 0, 0, 0.4);
  --shadow-lg:   0 10px 28px rgba(0, 0, 0, 0.5);
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) { @include dark-vars; }
}

:root[data-theme="dark"] { @include dark-vars; }

// ─── Global Reset ─────────────────────────────────────────────────────────────
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  background-color: var(--bg-app) !important;
}

html,
body {
  height: 100%;
  overflow: hidden;
  font-family: 'DM Sans', sans-serif;
  background-color: var(--bg-app) !important;
  color: var(--text-primary);
  -webkit-font-smoothing: antialiased;
}

::-webkit-scrollbar-track  { background: transparent; }

// ─── Layout ───────────────────────────────────────────────────────────────────
.page-container {
  max-width: 1400px;
  width: 100%;
  margin: 0 auto;
  padding: 24px;
}

.mat-mdc-card {
  background-color: var(--bg-card) !important;
  border-radius: var(--radius-md) !important;
  box-shadow: var(--shadow-sm) !important;
  border: 1px solid var(--border) !important;
  transition: box-shadow var(--transition), transform var(--transition),
              background-color var(--transition);

  &:hover {
    box-shadow: var(--shadow-md) !important;
    transform: translateY(-2px);
  }
}

// ─── Dialogs ──────────────────────────────────────────────────────────────────
.mat-mdc-dialog-container {
  .mdc-dialog__surface {
     background-color: var(--bg-card) !important;
     border-radius: var(--radius-lg) !important;
     box-shadow: var(--shadow-lg) !important;
     border: 1px solid var(--border) !important;
  }
}

.mat-mdc-dialog-content {
  color: var(--text-secondary) !important;
}

.mat-mdc-dialog-title {
  color: var(--text-primary) !important;
}

.mat-mdc-dialog-actions {
  background-color: var(--bg-app) !important;
  border-top: 1px solid var(--border) !important;
  padding: 16px 24px !important;
  margin: 0 !important;
}

// ─── Snackbar ──────────────────────────────────────────────────────────────────

.snack-success,
.snack-warning,
.snack-danger,
.snack-info {
  .mdc-snackbar__surface {
    background-color: var(--bg-card) !important;
    color: var(--text-primary) !important;
  }

  .mdc-button__label {
    color: var(--text-muted) !important;
  }
}

.snack-success .mdc-snackbar__surface { border-left: 4px solid var(--color-success) !important; }
.snack-warning .mdc-snackbar__surface { border-left: 4px solid var(--color-warning) !important; }
.snack-danger .mdc-snackbar__surface  { border-left: 4px solid var(--color-danger) !important; }
.snack-info .mdc-snackbar__surface    { border-left: 4px solid var(--color-primary) !important; }